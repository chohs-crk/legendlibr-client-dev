ğŸ”¥ 1. Collections Overview
battles
characters
raidBosses
raids
regionsDefault
users


ê° ì»¬ë ‰ì…˜ì€ ì•„ë˜ì²˜ëŸ¼ ì •ì˜ë¨.

ğŸ“ 2. battles / {battleId}
â–  ìš©ë„

1 vs 1 ì „íˆ¬ì˜ ëª¨ë“  ë¡œê·¸, í„´ ì§„í–‰, AI ê³„ì‚° ê²°ê³¼ ì €ì¥

AI INIT â†’ í„´ ì§„í–‰ â†’ ì¢…ë£Œê¹Œì§€ì˜ ì „ì²´ ìƒíƒœ ê¸°ë¡

â–  ì£¼ìš” í•„ë“œ êµ¬ì¡°
uid: string                  // ì „íˆ¬ ì†Œìœ ì
enemyId: string              // ìƒëŒ€ ìºë¦­í„° ID
enemyName: string
enemyScore: number

myId: string                 // ë‚´ ìºë¦­í„° ID
myName: string

currentTurn: number
finished: boolean
battleId: string

hpA: number                  // ë‚´ HP
hpB: number                  // ìƒëŒ€ HP

aiReady: boolean
aiFinishedAt: timestamp

prologue: string             // ì „íˆ¬ ë„ì… ìŠ¤í† ë¦¬

baseData: {
    choices: number[]
    effects: [...]
    pnTable: [...]
}

activeEffects: {
    A: [ { effect êµ¬ì¡° } ]
    B: [ ... ]
    C: [ ... ]  // 3ì¸ì¼ ê²½ìš°
}

skillScores: { index: number }

skillChoices: [
    {
        turn: number,
        skillA: number,
        skillB: number
    }
]

logs: [
   {
      turn: number,
      narration: string,
      hpA_before: number,
      hpA_after: number,
      hpB_before: number,
      hpB_after: number,
      skillAName: string,
      skillBName: string,
      totalDmgA: number,
      totalDmgB: number,
      createdAt: number
   }
]

createdAt: timestamp
updatedAt: timestamp

â–  íŠ¹ì§•

ë§¤ìš° ë°©ëŒ€í•œ ì „íˆ¬ ê¸°ë¡ì„ ì €ì¥í•˜ëŠ” êµ¬ì¡°

ë¡œê·¸ê°€ ë§ì•„ì§ˆ ìˆ˜ ìˆìŒ (AI ìŠ¤í† ë¦¬ í¬í•¨)

ğŸ“ 3. characters / {charId}
â–  ìš©ë„

ìœ ì €ê°€ ìƒì„±í•œ ìºë¦­í„° ì „ì²´ ìŠ¤í† ë¦¬Â·ìŠ¤í‚¬Â·ì„¸ê³„ê´€ ì €ì¥

â–  í•„ë“œ êµ¬ì¡°
uid: string                     // ìºë¦­í„° ì£¼ì¸
createdAt: timestamp

displayRawName: string
name: string

origin: string
originDesc: string

region: string
regionDetail: string

promptRaw: string
promptRefined: string

finalStory: string

features: string[]

scores: {
    combatScore: number ì „íˆ¬ì— ì í•©í•œê°€
    dominateScore: number ìƒëŒ€ì˜ íŠ¹ì§•ì„ ë¬´ì‹œí•˜ëŠ”ê°€
    metaScore: number trpg ì„¸ê³„ê°€ í—ˆêµ¬ì„ì„ ì¸ì‹í•˜ëŠ”ê°€
    narrativeScore: number ì„œìˆ ì´ ë§¤ë ¥ì ì¸ê°€
    ruleBreakScore: number ê·œì¹™ì„ íŒŒê´´í•˜ëŠ”ê°€
    supportScore: number ë³´ì¡°ì— ì í•©í•œê°€
    worldScore: number origin, regionê³¼ ì˜ ì–´ìš¸ë¦¬ëŠ”ê°€
}

skills: [
    {
        name: string
        shortDesc: string
        longDesc: string
        power: number
    },
    ...
]

storyScore: number
storyTheme: string

battleCount: number
battleScore: number

â–  íŠ¹ì§•

ìºë¦­í„° ìƒì„± ê³¼ì •ì—ì„œ AIê°€ ë§Œë“¤ì–´ë‚¸ ëª¨ë“  ê²°ê³¼ ê¸°ë¡

ì§€ì—­(origin/region), ìŠ¤í† ë¦¬, ìŠ¤í‚¬, ì ìˆ˜ê°€ ëª¨ë‘ í¬í•¨ëœ ìºë¦­í„° í”„ë¡œí•„ íŒŒì¼

ğŸ“ 4. raidBosses / {bossId}
â–  ìš©ë„

ë ˆì´ë“œ ë³´ìŠ¤ ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ” ê´€ë¦¬ì(admin) ì „ìš© DB

â–  í•„ë“œ êµ¬ì¡°
id: string
name: string
desc: string
hp: number
limit: number         // ë³´ìŠ¤ë‹¹ íŒŒí‹° ìµœëŒ€ ì¸ì›
stage: string         // ë‚œì´ë„ or í˜ì´ì¦ˆ

traits: string[]      // ë³´ìŠ¤ íŠ¹ì§• (ì¤‘ë…, ê·¹ë… ë“±)
skills: [
    {
        name: string
        desc: string
        class: string    // ë‹¨ì¼/ê´‘ì—­/íšŒë³µ ë“±
        pow: number
    }
]

isSeason: boolean
unlocked: boolean
createdAt: timestamp

ğŸ“ 5. raids / {raidId}
â–  ìš©ë„

ë ˆì´ë“œ ì „íˆ¬ ì§„í–‰ ìƒíƒœ ì €ì¥

íŒŒí‹° êµ¬ì„±, ìŠ¤í‚¬ ì„ íƒ, ë³´ìŠ¤ HP, ë¡œê·¸ ë“± í¬í•¨

â–  í•„ë“œ êµ¬ì¡°
uid: string
bossId: string
limit: number              // íŒŒí‹° ìµœëŒ€ ì¸ì›
engagementCount: number    // í„´ ì§„í–‰ íšŸìˆ˜

aiready: boolean
initStarted: boolean
battlestart: boolean
battlefinished: boolean

bossHp: number

partyStatus: [
    {
        charId: string
        currentHp: number
        maxHp: number
    }
]

effects: [
    {
        charIndex: number
        effect: {
            name: string
            target: "A"|"B"
            benefitTo: string
        }
        turns: number
        turnWeights: number[]
        skillIndex: number
    }
]

pnTable: [
    {
        charIndex: number
        pn: string
        skillIndex: number
    }
]

selectedSkillsByChar: {
    <charId>: [ index1, index2, index3 ]
}

result: "win"|"lose"
logs: string[]              // ì „íˆ¬ ë¡œê·¸ í…ìŠ¤íŠ¸

createdAt: timestamp
updatedAt: timestamp

â–  íŠ¹ì§•

raidsëŠ” 4ìºë¦­ or 3ìºë¦­ ë ˆì´ë“œ ëª¨ë‘ ëŒ€ì‘

ë³´ìŠ¤ ì „íˆ¬ ì „ì²´ ê´€ë¦¬ ë¬¸ì„œ

ğŸ“ 6. regionsDefault / {regionId}
â–  ìš©ë„

originë§ˆë‹¤ ê¸°ë³¸ ì œê³µë˜ëŠ” ì§€ì—­

ìœ ì €ëŠ” ì½ê¸°ë§Œ ê°€ëŠ¥

adminì´ ê´€ë¦¬

â–  í•„ë“œ êµ¬ì¡°
id: string
name: string
originId: string
detail: string
createdAt: timestamp

ğŸ“ 7. users / {uid}
â–  ìš©ë„

ìœ ì € ê°œì¸ ì„¤ì •, ìœ ì €ê°€ ë§Œë“  region ì €ì¥

â–  users/{uid} ë‚´ë¶€ êµ¬ì¡°
users/{uid}/regions/{regionId}

â–  region ë¬¸ì„œ êµ¬ì¡°
name: string
originId: string
detail: string
createdAt: timestamp