rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    function isAdmin() {
      return request.auth != null
        && request.auth.token.email == "hhchocookierun1@gmail.com";
    }

    // =====================================
    // Í∏∞Î≥∏ region (Í¥ÄÎ¶¨ÏûêÎßå Ïì∞Í∏∞)
    // =====================================
    match /regionsDefault/{regionId} {
      allow read: if true;
      allow write: if isAdmin();
    }

    // =====================================
    // Ïú†Ï†Ä region
    // =====================================
    match /users/{uid}/regions/{regionId} {
      allow read, write: if request.auth != null
          && request.auth.uid == uid;
    }

    // =====================================
    // Ï∫êÎ¶≠ÌÑ∞ (Ïú†Ï†Ä ÏßÅÏ†ë Ï†ëÍ∑º Ï∞®Îã®)
    // =====================================
    match /characters/{charId} {
      allow read, write: if isAdmin();
    }

    // =====================================
    // Ï†ÑÌà¨
    // =====================================
    match /battles/{battleId} {
      allow read, write: if isAdmin();
    }

    // =====================================
    // Î†àÏù¥Îìú
    // =====================================
    match /raids/{raidId} {
      allow read, write: if isAdmin();
    }

    // =====================================
    // Î≥¥Ïä§ DB
    // =====================================
    match /raidBosses/{bossId} {
      allow read: if true;
      allow write: if isAdmin();
    }

    // =====================================
    // üî• Îû≠ÌÇπ Ï∫êÏãú (ÏùΩÍ∏∞ Ï†ÑÏö© Í≥µÍ∞ú)
    // =====================================
    match /rankingsCache/{docId} {
  allow read: if true;
  allow write: if false;
}

  }
}


